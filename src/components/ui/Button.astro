---
import type { HTMLTag, Polymorphic } from 'astro/types'

export type ButtonVariants = 'default' | 'lg' | 'square'
export type ButtonType = 'button' | 'a'

type Props<TagName extends HTMLTag = HTMLTag> = {
  variant?: ButtonVariants
  class?: string
} & Polymorphic<{ as: TagName & ButtonType }>

// Must declare 'as' type as any because Tag element not recognize the polymorhpic,
// this must be fixed removing the = HTMLTag in the Props type declaration,
// but it make all other props as any.
// NOTE: This issues only be relevant for the componet itself, and not in the implementation.
const {
  as: Tag = 'button' as any,
  class: customClass,
  variant = 'default',
  ...props
} = Astro.props

const variants: Record<ButtonVariants, string> = {
  default: 'size-min px-12',
  lg: 'size-min px-16',
  square: 'size-[30px] aspect-square',
}
---

<Tag
  class:list={[
    'block whitespace-nowrap rounded py-2 font-azeret text-sm leading-none text-foreground outline outline-1 outline-foreground duration-150 hover:bg-foreground hover:text-background',
    variants[variant],
    customClass,
  ]}
  {...props}>
  <slot />
</Tag>
