---
import type { HTMLTag, Polymorphic } from 'astro/types'

type Variants = 'default' | 'lg' | 'square'
type TagType = 'button' | 'a'

type Props<TagName extends HTMLTag = HTMLTag> = {
  variant?: Variants
  class?: string
} & Polymorphic<{ as: TagName & TagType }>

// Must declare 'as' type as any because Tag element not recognize the polymorhpic,
// this must be fixed removing the = HTMLTag in the Props type declaration,
// but it make all other props as any.
// NOTE: This issues only be relevant for the componet itself, and not in the implementation.
const {
  as: Tag = 'button' as any,
  class: customClass,
  variant = 'default',
  ...props
} = Astro.props

const variants: Record<Variants, string> = {
  default: 'px-12',
  lg: 'px-16',
  square: 'size-[30px] aspect-square',
}
---

<Tag
  class:list={[
    'size-min whitespace-nowrap rounded-sm bg-foreground py-2 font-azeret text-sm font-light leading-none text-background outline-dashed outline-1 duration-150 hover:bg-background hover:text-foreground hover:outline-foreground',
    variants[variant],
    customClass,
  ]}
  {...props}>
  <slot />
</Tag>
