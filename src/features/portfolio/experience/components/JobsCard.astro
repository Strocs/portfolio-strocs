---
import type { CollectionEntry } from 'astro:content'

import Title from '@/components/ui/Title.astro'
import TitleLink from '@/components/ui/TitleLink.astro'
import Status from '@/components/ui/Status.astro'
import Github from '@/components/icons/Github.astro'
import Paragraph from '@/components/ui/Paragraph.astro'
import Button from '@/components/ui/Button.astro'
import { getI18N } from '@/i18n'

type Props = CollectionEntry<'projects'>

const { currentLocale: lang } = Astro
const { SEE_MORE_BTN } = await getI18N({ lang })

const { data, id } = Astro.props
const { title, extract, github, liveDemo, active } = data
---

<article
  class='grid h-60 w-full max-w-[420px] grid-rows-[fit-content(100%)_auto_fit-content(100%)] gap-2 rounded-lg border border-dashed border-foreground/25 px-6 pb-6 pt-4 text-foreground'>
  <header class='flex size-fit items-center gap-4'>
    <div class='flex items-center gap-2'>
      <Status {active} />
      {
        active ? (
          <TitleLink target='_blank' href={liveDemo}>
            <Title as='h3' content={title} />
          </TitleLink>
        ) : (
          <Title as='h3' content={title} />
        )
      }
    </div>
    {
      github && (
        <a
          href={github}
          target='_blank'
          aria-label='Repository Link'
          class='hover:scale-105'>
          <Github class='size-5 text-foreground' />
        </a>
      )
    }
  </header>
  <Paragraph content={extract} class='leading-tight' />
  <Button as='a' href={'/blog/' + id} class=''>{SEE_MORE_BTN}</Button>
</article>
